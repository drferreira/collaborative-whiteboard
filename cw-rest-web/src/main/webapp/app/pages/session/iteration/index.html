<!DOCTYPE html>
<html ng-app="iteration-module">
<head>
    <title>CW</title>
    <meta charset="UTF-8"/>
    <base href="/cw-rest/">

    <link rel="import" href="app/resources/lib/jquery/include.html"/>
    <link rel="import" href="app/resources/lib/angular/include.html"/>
    <link rel="import" href="app/resources/lib/bootstrap/include.html"/>

    <link rel="import" href="app/resources/directives/navbar/include.html"/>

    <link rel="stylesheet" type="text/css" href="app/resources/stylesheets/cw/styles.css"/>
    <script type="text/javascript" src="app/pages/session/iteration/iteration-module.js"></script>
    <script type="text/javascript" src="app/pages/session/iteration/iteration-ctrl.js"></script>
</head>
<body ng-controller="IterationCtrl" class="container-fluid">
<cw-navbar active="iteration"></cw-navbar>

<div class="container">

    <div class="col-lg-offset-2 col-md-7">
        <div class="form-group">
            <input type="text" placeholder="Buscar Iteração" ng-model="selectedIteration"
                   typeahead-template-url="app/pages/session/iteration/iteration-search-result-template.html"
                   uib-typeahead="iteration as iteration.name for iteration in fetchIterations | filter:{name:$viewValue}"
                   class="form-control" typeahead-on-select="onSelectIteration($model)">
        </div>
    </div>
</div>

<div ng-show="selectedIteration.available">
    <div class="well">
        <h1>{{selectedIteration.name}}
            <span class="small" ng-show="selectedIteration.finished">  finalizada  </span>
        </h1>

        <h4>
            {{formatDate(selectedIteration.init) | date:'dd/MM/yyyy'}}
            <small> até</small>
            {{formatDate(selectedIteration.end) | date:'dd/MM/yyyy'}}
        </h4>
    </div>

    <br>
    <br>

    <div class="col-md-6">
        <div>
            <h4 class="text-uppercase text-center">Estorias</h4>
        </div>
        <div class="list-group" ng-repeat="story in selectedIteration.available">
            <a class="list-group-item">
                <h4 class="list-group-item-heading">{{story.subject}}
                    <span class="small pull-right" aria-hidden="true">Disponivel</span>
                </h4>

                <p class="container" ng-bind-html="story.description | unsafe"></p>
            </a>
        </div>
    </div>

    <div class="col-md-6">
        <h4 class="text-uppercase text-center">Iteração</h4>

        <div class="list-group" ng-repeat="story in selectedIteration.intoIteration">
            <a class="list-group-item">
                <h4 class="list-group-item-heading">{{story.subject}}
                    <span class="small pull-right" aria-hidden="true">Disponivel</span>
                </h4>

                <p class="container" ng-bind-html="story.description | unsafe"></p>
            </a>
        </div>
    </div>
</div>


</body>
</html>
