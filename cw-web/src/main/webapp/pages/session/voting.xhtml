<ui:composition template="../../templates/generic.xhtml" xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:p="http://primefaces.org/ui">

    <ui:define name="pageContent">


        <h:form id="votingForm" prependId="false">
            <p:panel>
                <div id="storyHeader">
                    <h:panelGrid columns="2">
                        <h:outputLabel for="storyCode" value="Codigo:"/>
                        <h:outputText id="storyCode" value="#{votingController.getSelectedStory().code}"/>

                        <h:outputLabel for="storyBranch" value="Branch:"/>
                        <h:outputText id="storyBranch" value="#{votingController.getSelectedStory().branch}"/>

                        <h:outputLabel for="storySubject" value="Assunto:"/>
                        <h:outputText id="storySubject" value="#{votingController.getSelectedStory().subject}"/>
                    </h:panelGrid>
                </div>
            </p:panel>

            <p:dataTable value="#{votingController.tasks}">
                <f:facet name="header">
                    <p:toolbar>
                        <f:facet name="left">
                            <p:commandButton value="Criar Tarefa" onclick="PF('editionTask').show();"/>
                        </f:facet>
                    </p:toolbar>
                </f:facet>
            </p:dataTable>
        </h:form>

        <p:dialog widgetVar="editionTask" modal="true" resizable="false">
            <h:form>
                <h:panelGrid>
                    <h:column>
                        <p:watermark value="Tempo" for="time"/>
                        <p:calendar id="time" pattern="HH:mm" timeOnly="true" required="true" value="#{taskCreationController.taskCreation.time}"/>
                    </h:column>

                    <h:column>
                        <p:watermark value="Assunto" for="taskSubject"/>
                        <p:inputText id="taskSubject" required="true" size="68" value="#{taskCreationController.taskCreation.subject}"/>
                    </h:column>

                    <h:column>
                        <p:watermark value="Descrição" for="description"/>
                        <p:inputTextarea id="description" rows="20" cols="70" value="#{taskCreationController.taskCreation.description}"/>
                    </h:column>

                    <h:column>
                        <p:commandButton value="Salvar" action="#{taskCreationController.createTask()}"/>
                        <p:commandButton value="Cancelar" onclick="PF('editionTask').hide()" immediate="true"/>
                    </h:column>
                </h:panelGrid>
            </h:form>
        </p:dialog>
    </ui:define>
</ui:composition>